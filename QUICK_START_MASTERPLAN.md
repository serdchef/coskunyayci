# ğŸ›ï¸ DIJITAL ZÃœMRÃœT SARAYINA GÄ°DÄ°Å ROZETASI
## MÃ¼kemmellik Ä°Ã§in KapsamlÄ± Yol HaritasÄ± - HÄ±zlÄ± Referans

---

## ğŸ“‹ MASTER PLAN Ã–ZET

### 6 Phase, 6 Hafta, 1 Hedef: **KÃ¼resel Liderlik**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 1: VERI ALTYAPISI (24-30 AralÄ±k)                         â”‚
â”‚ âœ… PostgreSQL Kurulumu (Supabase)                               â”‚
â”‚ âœ… Prisma Migration                                             â”‚
â”‚ âœ… SUPER_ADMIN (serdchef@gmail.com) Setup                      â”‚
â”‚ âœ… Seed Scripts                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 2: GÃœVENLÄ°K & ERIÅIM (31 AralÄ±k - 6 Ocak)              â”‚
â”‚ âœ… Google OAuth (Admin Only)                                    â”‚
â”‚ âœ… Enhanced Middleware Protection                               â”‚
â”‚ âœ… Secret Management (Vercel Vault)                             â”‚
â”‚ âœ… Role-Based Access Control                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 3: Ã–DEME SÄ°STEMLERÄ° (7-13 Ocak)                          â”‚
â”‚ âœ… Stripe Live Integration                                      â”‚
â”‚ âœ… Checkout Endpoint (TRY Support)                             â”‚
â”‚ âœ… Webhook Automation (Order Status)                            â”‚
â”‚ âœ… Invoice Template ("Ghost Gold" Premium)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 4: Ä°LETÄ°ÅÄ°M KANALLARI (14-20 Ocak)                      â”‚
â”‚ âœ… Resend Domain Verification (coskunyayci.com)               â”‚
â”‚ âœ… Order Confirmation + Status Emails                           â”‚
â”‚ âœ… Twilio WhatsApp Notifications                                â”‚
â”‚ âœ… Admin Alert System                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 5: PERFORMANCE & UX (21-27 Ocak)                        â”‚
â”‚ âœ… Lighthouse 85+ Optimization                                 â”‚
â”‚ âœ… Next/Image Implementation                                    â”‚
â”‚ âœ… AI Sommelier Enhancement                                     â”‚
â”‚ âœ… B2B Kurumsal PortalÄ±                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 6: TEST & LAUNCH (28 Ocak - 3 Åubat)                   â”‚
â”‚ âœ… E2E Testing (Playwright)                                     â”‚
â”‚ âœ… Analytics Setup (PostHog)                                    â”‚
â”‚ âœ… Pre-Launch Checklist                                         â”‚
â”‚ ğŸš€ GO LIVE                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ PHASE 1: VERI VE ALTYAPI MÄ°MARÄ°SÄ°
**Hedef:** KalÄ±cÄ±, Ã¶lÃ§eklenebilir veritabanÄ±

### Kritik Ä°ÅŸler:
```
â–¡ Supabase.com'da PostgreSQL oluÅŸtur
  - Free tier sufficient for MVP
  - Copy DATABASE_URL
  - Backup enable et

â–¡ Prisma Migration
  npx prisma migrate dev --name initial_postgres

â–¡ SUPER_ADMIN Setup
  email: serdchef@gmail.com
  role: SUPER_ADMIN
  password: <deÄŸiÅŸtir sonra>

â–¡ Production Seed
  npx prisma db seed
  - 16 Products
  - 64 Product Variants (4 per product)
  - Test Users
  - Sample Orders

â–¡ Vercel Environment Variables
  DATABASE_URL="postgresql://..."
  NEXTAUTH_URL, NEXTAUTH_SECRET
```

### BaÅŸarÄ± Kriterleri:
- âœ… `npx prisma studio` Ã§alÄ±ÅŸÄ±yor
- âœ… ÃœrÃ¼nler ve sipariÅŸler gÃ¶rÃ¼nÃ¼yor
- âœ… serdchef@gmail.com SUPER_ADMIN role'Ã¼ var

---

## ğŸ” PHASE 2: GÃœVENLÄ°K & ERIÅIM YÃ–NETIMI
**Hedef:** "SarayÄ±n MuhafÄ±zlarÄ±" tam entegre

### Kritik Ä°ÅŸler:
```
â–¡ Google Cloud Console
  - OAuth 2.0 Client ID oluÅŸtur
  - Authorized URLs:
    â€¢ http://localhost:3000
    â€¢ https://yourdomain.com
  - Copy: CLIENT_ID + SECRET

â–¡ NextAuth.js Google Provider
  - CredentialsProvider + GoogleProvider
  - Admin-only filtering (serdchef@gmail.com)
  - Role-based JWT/Session

â–¡ Enhanced Middleware
  - /admin/* protection
  - Role-based authorization
  - Security headers (CSP, HSTS, XSS)

â–¡ Vercel Secret Management
  â–¡ GOOGLE_CLIENT_ID
  â–¡ GOOGLE_CLIENT_SECRET
  â–¡ NEXTAUTH_SECRET (64-char random)
  â–¡ DiÄŸer API keys
```

### BaÅŸarÄ± Kriterleri:
- âœ… serdchef@gmail.com Google OAuth ile login yapabiliyor
- âœ… /admin/* sadece ADMIN+ access
- âœ… Security headers aktif

---

## ğŸ’³ PHASE 3: Ã–DEME SÄ°STEMLERÄ° (HAZÄ°NE DAIRESI)
**Hedef:** Stripe live + otomatik order status

### Kritik Ä°ÅŸler:
```
â–¡ Stripe Dashboard
  - Activate live mode
  - Copy live keys:
    â€¢ STRIPE_SECRET_KEY
    â€¢ STRIPE_PUBLISHABLE_KEY
  - Enable 3D Secure

â–¡ Checkout Endpoint (/api/checkout)
  POST â†’ Create Stripe Session
  Return: sessionId, checkout URL

â–¡ Webhook Listener (/api/webhooks/stripe)
  - Signature verification
  - checkout.session.completed event
  - Update Order status â†’ CRAFTING
  - Send confirmation email

â–¡ Invoice Template
  - "Ghost Gold" estetik
  - Playfair Display typography
  - mÃ¼ÅŸteri + admin bilgileri

â–¡ Stripe Test
  Test card: 4242 4242 4242 4242
  Exp: 12/25 | CVC: 123
```

### BaÅŸarÄ± Kriterleri:
- âœ… Test Ã¶deme tamamlanÄ±yor
- âœ… Order status CRAFTING oluyor
- âœ… Confirmation email gidiyor

---

## ğŸ“§ PHASE 4: Ä°LETÄ°ÅÄ°M KANALLARI
**Hedef:** Kurumsal email + WhatsApp notifications

### Kritik Ä°ÅŸler:
```
â–¡ Resend Setup
  - Domain verification (coskunyayci.com)
  - DKIM, SPF, DMARC records
  - Sender: orders@coskunyayci.com

â–¡ Email Sequences
  1. Order Confirmation
     - MÃ¼ÅŸteri adÄ±, sipariÅŸ detaylarÄ±
     - "AltÄ±n MÃ¼hÃ¼r" tasarÄ±mÄ±
  
  2. Status Updates
     - ğŸ‘¨â€ğŸ³ CRAFTING (HazÄ±rlanÄ±yor)
     - ğŸ”¥ IN_OVEN (FÄ±rÄ±nda)
     - â„ï¸ COOLING (SoÄŸumasÄ±)
     - ğŸ“¦ PACKING (Paketleme)
     - ğŸšš SHIPPED (Yolda)
     - âœ… DELIVERED (Teslim)

â–¡ Twilio WhatsApp
  - Sandbox number setup
  - sendWhatsAppOrderNotification()
  - Admin alerts (>5000â‚º)

â–¡ Integration with Webhooks
  - Stripe â†’ Email + WhatsApp
  - Admin notification system
```

### BaÅŸarÄ± Kriterleri:
- âœ… Test email coskunyayci.com'dan geliyor
- âœ… WhatsApp mesaj alÄ±nÄ±yor
- âœ… Status updates otomatik

---

## âš¡ PHASE 5: PERFORMANCE & UX
**Hedef:** Lighthouse 85+, AI Sommelier, B2B Portal

### Kritik Ä°ÅŸler:
```
â–¡ Lighthouse Optimization
  1. CSS Filter Removal
     - Gereksiz brightness/saturate kaldÄ±r
     - Static background suffices
  
  2. Next/Image Implementation
     - ProductCard'larda lazy-load
     - Priority images (hero)
     - Responsive sizes
  
  3. Bundle Size
     - Framer Motion splitting
     - Code splitting
     - Tree-shaking

â–¡ AI Sommelier Enhancement
  - BAKLAVA_KNOWLEDGE prompt
  - DetaylÄ± Ã¼rÃ¼n Ã¶zellikleri
  - KiÅŸiselleÅŸtirilmiÅŸ Ã¶neriler
  - Fiyat ve paket bilgileri

â–¡ B2B Kurumsal PortalÄ± (/kurumsal/kayit)
  - Company registration form
  - Tax ID + company size
  - Authorized person details
  - Admin approval workflow
  - Bulk order discounts
```

### BaÅŸarÄ± Kriterleri:
- âœ… Lighthouse score: 85+ (Performance)
- âœ… NextLighthouse score: 90+ (SEO)
- âœ… Sommelier detailed baklava advice verebiliyor
- âœ… B2B registration form Ã§alÄ±ÅŸÄ±yor

---

## ğŸ§ª PHASE 6: TESTING & LAUNCH
**Hedef:** Production-ready go-live

### Kritik Ä°ÅŸler:
```
â–¡ E2E Testing (Playwright)
  1. Chatbot â†’ Product â†’ Order Flow
  2. Payment â†’ Stripe â†’ Success Page
  3. Email + WhatsApp notifications
  4. Admin dashboard
  5. Order status updates

â–¡ Analytics Setup (PostHog)
  - identifyUser() on login
  - trackEvent() on key actions
  - Dashboard metrics
  - Funnel analysis

â–¡ Pre-Launch Checklist
  âœ… Database backups
  âœ… SSL certificate
  âœ… Domain DNS
  âœ… Email forwarding
  âœ… Monitoring active
  âœ… Incident response plan

â–¡ Go-Live Steps
  1. Final database backup
  2. Deploy to production
  3. Verify all endpoints
  4. Monitor error logs
  5. Check payment transactions
  6. Confirm emails delivered
  7. Test WhatsApp alerts
```

### BaÅŸarÄ± Kriterleri:
- âœ… E2E tests: 100% pass
- âœ… Lighthouse: 85+
- âœ… Uptime: 99.9%
- âœ… All KPIs met

---

## ğŸ“Š QUICK IMPLEMENTATION REFERENCE

### Dosya YapÄ±sÄ± (Yeni/GÃ¼ncellenecek)

```
NEW:
â”œâ”€â”€ app/api/checkout/route.ts           (Stripe checkout)
â”œâ”€â”€ app/api/webhooks/stripe/route.ts    (Webhook listener)
â”œâ”€â”€ app/kurumsal/kayit/page.tsx         (B2B portal)
â”œâ”€â”€ app/api/b2b/register/route.ts       (B2B registration API)
â”œâ”€â”€ lib/whatsapp.ts                     (Twilio WhatsApp)
â”œâ”€â”€ lib/invoice.ts                      (Invoice template)
â””â”€â”€ e2e/complete-flow.spec.ts           (E2E tests)

UPDATED:
â”œâ”€â”€ lib/auth.ts                         (Google OAuth)
â”œâ”€â”€ middleware.ts                       (Enhanced security)
â”œâ”€â”€ lib/payments.ts                     (Stripe live)
â”œâ”€â”€ lib/email.ts                        (Resend domain)
â”œâ”€â”€ app/globals.css                     (CSS optimization)
â”œâ”€â”€ next.config.js                      (Bundle optimization)
â”œâ”€â”€ prisma/seed.ts                      (PostgreSQL seed)
â””â”€â”€ .env.production                     (Vercel secrets)
```

### Environment Variables Checklist

```env
# Database (PHASE 1)
DATABASE_URL="postgresql://..."

# Authentication (PHASE 2)
NEXTAUTH_URL="https://coskunyayci.com"
NEXTAUTH_SECRET="<64-char-random>"
GOOGLE_CLIENT_ID="xxx.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="xxx"

# Payment (PHASE 3)
STRIPE_SECRET_KEY="sk_live_xxx"
STRIPE_PUBLISHABLE_KEY="pk_live_xxx"
STRIPE_WEBHOOK_SECRET="whsec_xxx"

# Email (PHASE 4)
RESEND_API_KEY="re_xxx"

# Communication (PHASE 4)
TWILIO_ACCOUNT_SID="ACxxx"
TWILIO_AUTH_TOKEN="xxx"
TWILIO_WHATSAPP_NUMBER="whatsapp:+14155238886"
BUSINESS_PHONE_NUMBER="+905321234567"

# Analytics (PHASE 6)
NEXT_PUBLIC_POSTHOG_KEY="phc_xxx"
NEXT_PUBLIC_POSTHOG_HOST="https://app.posthog.com"

# Other
OPENAI_API_KEY="sk-xxx"
ADMIN_EMAIL="serdchef@gmail.com"
```

---

## ğŸ¯ HAFTALIK HEDEFLER

```
HAFTA 1: PostgreSQL + SUPER_ADMIN Setup âœ…
HAFTA 2: Google OAuth + Middleware ğŸ”
HAFTA 3: Stripe Live + Webhooks ğŸ’³
HAFTA 4: Email + WhatsApp ğŸ“§
HAFTA 5: Lighthouse 85+ + B2B ğŸš€
HAFTA 6: Testing + Go-Live ğŸ‰

TARGET LAUNCH: 3 Åubat 2025
```

---

## ğŸš€ GO-LIVE COMMAND

```bash
# TÃ¼m checks tamamlandÄ±ÄŸÄ±nda:
npm run build          # Production build
npm run start          # Verify locally
git add -A
git commit -m "ğŸš€ Production ready - launching Digital Emerald Palace"
git push origin main
# Vercel auto-deploys
# ğŸ‰ LIVE!
```

---

## ğŸ“ CRITICAL CONTACTS

```
ğŸ›ï¸ Platform Owner: serdchef@gmail.com
ğŸ—„ï¸ Database: Supabase
ğŸ’³ Payment: Stripe
ğŸ“§ Email: Resend
ğŸ’¬ SMS: Twilio
ğŸ“Š Analytics: PostHog
ğŸ¯ Monitoring: Sentry
```

---

## âœ¨ VÄ°ZYON

> "CoÅŸkun YayÃ§Ä± Baklava, beÅŸ yÄ±l iÃ§inde kÃ¼resel baklava e-ticaret lideri
> olacaktÄ±r. Dijital ZÃ¼mrÃ¼t SarayÄ±, Gaziantep'in lÃ¼ks mirasÄ±nÄ±
> dÃ¼nyaya taÅŸÄ±yan bir sarsÄ±lmaz otorite olacak."

ğŸ›ï¸ **MÃ¼kemmelliÄŸe giden yol baÅŸlamÄ±ÅŸtÄ±r.**

---

**Son GÃ¼ncelleme:** 22 AralÄ±k 2025
**Durum:** READY FOR PHASE 1 âœ…
**Sonraki AdÄ±m:** PostgreSQL Setup (Hafta 1)
